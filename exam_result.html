<!DOCTYPE html>
<html>
  <head>
    <title>Spring Flowers School Student Portal</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/css/exam_result.css" />
    <script src="./js/script.js"></script>
    <script>
      // Load the exam results data
      fetch('./js/users.json')
        .then((response) => response.json())
        .then((data) => {
          // Get the username from localstorage
          var username = localStorage.getItem('studentName');

          // Find the user with matching username
          var user = data.users.find((u) => u.username === username);

          if (user && user.examResults) {
            // Display the exam results
            document.getElementById('mathsGrade').textContent =
              user.examResults.Maths.grade;
            document.getElementById('mathsMarks').textContent =
              user.examResults.Maths.marks.toString();
            document.getElementById('scienceGrade').textContent =
              user.examResults.Science.grade;
            document.getElementById('scienceMarks').textContent =
              user.examResults.Science.marks.toString();
            document.getElementById('algebraGrade').textContent =
              user.examResults.Algebra.grade;
            document.getElementById('algebraMarks').textContent =
              user.examResults.Algebra.marks.toString();
            document.getElementById('artGrade').textContent =
              user.examResults.Art.grade;
            document.getElementById('artMarks').textContent =
              user.examResults.Art.marks.toString();
            document.getElementById('englishGrade').textContent =
              user.examResults.English.grade;
            document.getElementById('englishMarks').textContent =
              user.examResults.English.marks.toString();
            document.getElementById('totalMarks').textContent =
              user.examResults.Total.marks;
          }
        })
        .catch((error) => {
          console.log('Error loading user data:', error);
        });
    </script>
  </head>
  <body>
    <header>
      <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
          <img
            class="img-thumbnail logo"
            src="/assets/logo.png"
            alt="Spring Flowers School"
            style="height: 100px"
          />
          <button
            class="navbar-toggler bg-light"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="true"
            aria-label="Toggle navigation"
            type="button"
          >
            <i class="fas fa-align-justify"></i>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a
                  class="nav-link active"
                  aria-current="page"
                  href="./index.html"
                  >Home</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link active"
                  aria-current="page"
                  href="./timetable.html"
                  >Time Table</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link active"
                  aria-current="page"
                  href="./exam_result.html"
                  >Exam Result</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link active"
                  aria-current="page"
                  href="./extra_activity.html"
                  >Extra Activity</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link active"
                  aria-current="page"
                  href="./student_profile.html"
                  >Student Profile</a
                >
              </li>
            </ul>
            <ul class="ps-0">
              <div class="dropdown">
                <button
                  class="btn btn-secondary dropdown-toggle"
                  type="button"
                  id="dropdownMenuButton1"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                ></button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                  <li>
                    <a class="dropdown-item" href="#" onclick="logout()"
                      >Logout</a
                    >
                  </li>
                </ul>
              </div>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <section>
      <div class="accordion">
        <div class="accordion-body center">
          <h1>Exam Result</h1>
        </div>
        <div class="container d-flex align-items-center justify-content-center">
          <table>
            <thead>
              <tr>
                <td colspan="2">Subject</td>
                <td rowspan="2">Grade</td>
                <td rowspan="2">Marks</td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Maths</td>
                <td colspan="2" id="mathsGrade"></td>
                <td id="mathsMarks"></td>
              </tr>
              <tr>
                <td>Science</td>
                <td id="scienceGrade" colspan="2"></td>
                <td id="scienceMarks"></td>
              </tr>
              <tr>
                <td>Algebra</td>
                <td id="algebraGrade" colspan="2"></td>
                <td id="algebraMarks"></td>
              </tr>
              <tr>
                <td>Art</td>
                <td id="artGrade" colspan="2"></td>
                <td id="artMarks"></td>
              </tr>
              <tr>
                <td>English</td>
                <td id="englishGrade" colspan="2"></td>
                <td id="englishMarks"></td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td colspan="3" class="footer">Total</td>
                <td id="totalMarks"></td>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>
    </section>
    <footer class="pt-4 my-md-5 pt-md-5 border-top">
      <div class="copyright text-center wow zoomIn">
        <p>Â© 2023 Pradeep Kumar</p>
      </div>
    </footer>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
